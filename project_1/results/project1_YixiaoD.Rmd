---
title: "project1_YixiaoD"
output: html_document
---
# Background
UMD(Urban Ministries of Durham) is a non-profit orgnization which connects with the community to end homelessness and fight poverty by offering food, shelter and a future to neighbors in need. This project is designed to dig into the data provided by UMD and find something valuable for the staff who are working for the orgnization.  
In this project, I want to predict whether a person comes for help will come back again based on the aid he gets this time, the times of he came before and the average aid he got before. 

# Data
The data source is provided by UMD and the raw data file is given in the data dictionary.

# Data Cleasing
The raw data is heard to analyse. Therefore, data cleansing is condected.
Firstly, I notice that some records are so old while some happen in the future. So I plot how many record are there in each year.
```{r include = FALSE}
library(tidyverse)

#read dataset
raw_df <- read_tsv("/Users/Yixiao/Desktop/611project/project_1/data/UMD_Services_Provided_20190719.tsv")
```
```{r}
#separate Date and change type
df <- separate(raw_df, Date, into = c("month", "day", "year"), sep = "/")
df$month <- as.numeric(df$month)
df$day <- as.numeric(df$day)
df$year <- as.numeric(df$year)

#count how many people com for help each year
count_year <- df %>% group_by(year) %>% summarise(count = n())
ggplot(count_year) +
  geom_point(aes(year, count))
```

From the figure we can see that there are little records before 2001. This is consistent with the history of UMD: In 2001, the Durham Community Shelter for HOPE, St. Philipâ€™s Community Cafe, and the United Methodist Mission Society merged to form Urban Ministries of Durham (From UMD website). Also, there are some records happening in the future.
Therefore, we delete the records in the years before 2001 and those records which happen in the future (after Sep 2019).
```{r}
df <- df %>%
  filter(year >= 2001 & year <= 2019) %>%
  filter(year < 2019 | (year == 2019 & month <=9))
```

Since some columns are useless, we only keep the columns about date, client number, food, cloth, diaper, school kit and dyiene kit (the bus tickets and money providing service are discontinued so I removed them as well).
```{r}
df <- df %>%
  select( month : `Hygiene Kits`) %>%
  select(-`Bus Tickets (Number of)`, -`Notes of Service`)
df[is.na(df)] <- 0
```

What is more, I merge the "Client File Number" and "Client File Merge" into one columns. In this way, different members in a family who come for help will be considered as one client. To achieve this, I use loop statement. For each record, if the Client File Merge is not 0, the replace the Client File Number with Client File Merge.
```{r}
# merge Client file Number
for (i in 1:nrow(df)) {
  if (df[i,"Client File Merge"] != 0) {
    df[i,"Client File Number"] = df[i,"Client File Merge"]
  }
}
df <- select(df, -`Client File Merge`)
```

Up to now, the data cleasing is completed. And I will use this data frame to conduct following analysis.

# What I am interesting about
I summarise the coming times of different clients and show it with bar plot.
```{r}
come_times <- df %>%
  group_by(`Client File Number`) %>%
  summarise(coming_times = n())
ggplot(come_times) +
  geom_bar(aes(coming_times)) + 
  xlim(0,50)
```

The figure shows that most clients only come once and little clients come for help ten times or more. So I wonder if we could predict whether a client will come again, we can pay more attention to those who is likely to come again since thay may need more help than those who will not come again.






